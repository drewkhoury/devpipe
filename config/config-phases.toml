# Test config with phase-based grouping

[defaults]
outputRoot = ".devpipe"
fastThreshold = 300
animatedGroupBy = "phase"  # Group animated UI by "phase" or "type"

[defaults.git]
mode = "staged_unstaged"

[task_defaults]
enabled = true
workdir = "."
estimatedSeconds = 10

# Phase 1: Quality checks (parallel)
[tasks.phase-quality]
name = "Quality Checks"
desc = "Lint and format validation"

[tasks.lint]
name = "Lint"
type = "quality"
command = "./hello-world.sh lint"
estimatedSeconds = 6

[tasks.format]
name = "Format"
type = "quality"
command = "./hello-world.sh format"
estimatedSeconds = 3

# Phase 2: Build (after quality checks pass)
[tasks.phase-build]
name = "Build"
desc = "Build the application artifact"

[tasks.build]
name = "Build"
type = "release"
command = "./hello-world.sh build"
estimatedSeconds = 3
metricsFormat = "artifact"
metricsPath = "artifacts/build/app.txt"

# Phase 3: Tests (parallel, after build)
[tasks.phase-tests]
name = "Tests"
desc = "Run all test suites"

[tasks.unit-tests]
name = "Unit Tests"
type = "correctness"
command = "./hello-world.sh unit-tests"
estimatedSeconds = 3
metricsFormat = "junit"
metricsPath = "artifacts/test/junit.xml"

[tasks.e2e-tests]
name = "E2E Tests"
type = "correctness"
command = "./hello-world.sh e2e-tests"
estimatedSeconds = 600
