# devpipe configuration file
# Copy this to config.toml and customize for your project

[defaults]
# Where to store pipeline runs
outputRoot = ".devpipe"

# Threshold in seconds for --fast flag (skip tasks >= this value)
fastThreshold = 300

[defaults.git]
# Git mode: "staged", "staged_unstaged", or "ref"
# - staged: only staged files (git diff --cached)
# - staged_unstaged: staged + unstaged files (git diff HEAD)
# - ref: compare against specific ref
mode = "staged_unstaged"

# Reference to compare against (used when mode = "ref")
ref = "main"

[task_defaults]
# Default values for all tasks
enabled = true
workdir = "."
estimatedSeconds = 10

# Define your tasks
# Each task must have at minimum: command
# Optional: name, group, workdir, estimatedSeconds, enabled

[tasks.lint]
name = "Lint"
type = "quality"
command = "./hello-world.sh lint"
estimatedSeconds = 5

[tasks.format]
name = "Format"
type = "quality"
command = "./hello-world.sh format"
estimatedSeconds = 5

[tasks.type-check]
name = "Type Check"
type = "correctness"
command = "./hello-world.sh type-check"
estimatedSeconds = 10

[tasks.build]
name = "Build"
type = "release"
command = "./hello-world.sh build"
estimatedSeconds = 15

[tasks.unit-tests]
name = "Unit Tests"
type = "correctness"
command = "./hello-world.sh unit-tests"
estimatedSeconds = 20

[tasks.e2e-tests]
name = "E2E Tests"
type = "correctness"
command = "./hello-world.sh e2e-tests"
estimatedSeconds = 600

# You can disable tasks
# enabled = false

# You can override workdir per task
# workdir = "./frontend"

# Example: Real project configuration
# [tasks.eslint]
# name = "ESLint"
# type = "quality"
# command = "npm run lint"
# workdir = "."
# estimatedSeconds = 10

# [tasks.prettier]
# name = "Prettier"
# type = "quality"
# command = "npm run format:check"
# estimatedSeconds = 5

# [tasks.typescript]
# name = "TypeScript"
# type = "correctness"
# command = "npm run type-check"
# estimatedSeconds = 15

# [tasks.jest]
# name = "Jest Tests"
# type = "correctness"
# command = "npm test"
# estimatedSeconds = 30

# [tasks.build-frontend]
# name = "Build Frontend"
# type = "release"
# command = "npm run build"
# workdir = "./frontend"
# estimatedSeconds = 60

# [tasks.build-backend]
# name = "Build Backend"
# type = "release"
# command = "go build -o bin/server ./cmd/server"
# workdir = "./backend"
# estimatedSeconds = 20
